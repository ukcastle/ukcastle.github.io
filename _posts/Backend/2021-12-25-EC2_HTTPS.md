---
layout: post
title: AWS 도메인으로 EC2에 HTTPS 연결하기
category: Backend
tag: [AWS] 
---

## 목차

직접 만든 EC2 서버를 배포하면서, 실시간 영상을 받아야 할 때가 있었습니다.  
하지만 HTTP로는 인증서가 없어 웹캠을 받지 못하는 문제가 있었습니다.  
기존에 있던 방법들은 AWS의 UI 업데이트 이후 복잡함이 있었기에 이를 해결한 방법을 다시 정리합니다.  

본문은 해당 순서로 진행될 예정입니다.  

1. 도메인 등록  



## 도메인 등록

#### 도메인 구매  

타 사이트에서 도메인을 구매하여 연결할 수도 있겠지만, 본문에서는 AWS 내에서 도메인 등록부터 시작하겠습니다.  

AWS의 Route 53 서비스에 들어간 뒤, **도메인 등록** 탭에 들어갑니다.  
여러가지 선택지가 있지만, .click 도메인이 3$로 가장 저렴해보였습니다.  

![](/postimg/AWS/1225_1.png)  

.click 도메인이 너무 광고 사이트같아 꺼려질 땐 .com과 같은 도메인은 12$정도로 구매할 수 있습니다.  
**참고로 해당 도메인의 1년 사용료이며 구매 즉시 일시불로 결제됩니다.**  

다음, 구매가 완료됐다는 가정 하에 다음 단계로 넘어가겠습니다.  

#### 호스팅  

이제, 해당 도메인의 호스팅 영역을 설정할 차례입니다.  
예를 들어, naver.com의 앞에 www. 가 들어가는 것 처럼요  

Route 53 탭의 **호스팅 영역** 탭으로 들어갑니다.  

![](/postimg/AWS/1225_2.png)   

도메인 이름 탭에는 **구매한 도메인 이름**을 적어주시면 됩니다.  
이 후 퍼블릭으로 체크한 뒤, 나머지는 선택사항이니 원하시는대로 결정하면 됩니다.  

![](/postimg/AWS/1225_3.png)  

이런 탭이 보이면 성공입니다. 일단 여긴 다음에 올거니까 잠시 다른데로 가봅시다.  


<br>

## 인증서 발급  

HTTPS에서의 S가 있는 이유가 있습니다.  
인증서를 받으러 가봅시다.  

#### AWS Certificate Manager 

![](/postimg/AWS/1225_4.png)  

저는 이미 받아서 하나의 인증서가 있습니다. HTTPS 접속을 위해서는 해당 인증서가 필요합니다. 받으러 가봅시다. 요청 버튼을 눌러주세요.  

![](/postimg/AWS/1225_5.png)  

해당부분에 정규식 형태로 넣어주면 됩니다.  
예를 들어 저는 `castleuk.click` 도메인을 구매했으니, `*.castleuk.click` 형태로 만들어주는거죠.  

그 다음 DNS 검증과 이메일 검증이 있는데, 저같은 경우에는 **DNS 검증**을 선택했습니다.  
이후 10분정도 기다린 후에 승인이 됐고, 이메일 검증을 체크하면 타 블로그에서 aws에 가입할 떄 등록한 이메일로 전송한다는데 제 경우에는 오지 않고 `admin.castleuk.click` 과 같은 주소로 이메일이 전송됐다고 합니다.  이 때문에 오랜 시간 애먹었던 기억이 있습니다.  
또한 가입한 이메일로 도메인 구매와 같은 이메일들이 실시간으로 전송되니 만약 검증이 늦어진다면 확인해보는것도 좋은 것 같습니다.  

여기서 꼭 **승인** 표시가 생겨야 다음 단계로 넘어갈 수 있습니다.  






